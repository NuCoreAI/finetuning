{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZY 008 SC Basic Assoc 2 {H}\nID: ZY008_252N002\nParent: Master Bath Disco [ID: ZY008_1]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]***Device***\nName: ZY 008 SC Basic Assoc 3 {H}\nID: ZY008_252N003\nParent: Master Bath Disco [ID: ZY008_1]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]***Device***\nName: ZY 020 SC Basic Assoc 2 {H}\nID: ZY020_252N002\nParent: Party Lights Ceiling Left Grp [ID: ZY020_1]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]\n\nUSER QUERY: When either Master Bath Disco switch (ZY008_252N002 or ZY008_252N003) is turned ON, query both Master Bath devices to refresh their status."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 1,\n    \"name\": \"Query Master Bath sensors when either turns on\",\n    \"parent\": 0,\n    \"comment\": \"\",\n    \"if\": [\n      { \"(\": 1 },\n        { \"==\": { \"device\": \"ZY008_252N002\", \"control\": \"DON\" } },\n        { \"or\": 1 },\n        { \"==\": { \"device\": \"ZY008_252N003\", \"control\": \"DON\" } },\n      { \")\": 1 }\n    ],\n    \"then\": [\n      { \"device\": \"ZY008_252N002\", \"command\": \"QUERY\", \"parameters\": [] },\n      { \"device\": \"ZY008_252N003\", \"command\": \"QUERY\", \"parameters\": [] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"When either Master Bath device emits an On (DON) event we immediately query both Master Bath devices so the system has current statuses for synchronization and diagnostics. Both devices accept only the QUERY command, so the routine issues queries rather than trying to control them.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
