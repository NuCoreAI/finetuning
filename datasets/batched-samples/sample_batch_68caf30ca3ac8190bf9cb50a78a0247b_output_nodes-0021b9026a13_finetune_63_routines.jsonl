{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZY 027 Switch All\nID: ZY027_183\nParent: Deck Lighting Transfrmr ZY27 [ID: ZY027_1]\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=25]\n        Ignore All On & All Off [0]\n        Ignore All On [1]\n        Ignore All Off [2]\n        Ignore None [255]\n  ***Accept Commands***\n    All On [id=ALLON]\n    All Off [id=ALLOFF]\n    Options [id=ALLSET]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            Ignore All On & All Off [0]\n            Ignore All On [1]\n            Ignore All Off [2]\n            Ignore None [255]\n    Query [id=QUERY]***Device***\nName: ZY 027 SC Basic Assoc 2\nID: ZY027_252N002\nParent: Deck Lighting Transfrmr ZY27 [ID: ZY027_1]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]***Device***\nName: ZY 027 SC Basic Assoc 3\nID: ZY027_252N003\nParent: Deck Lighting Transfrmr ZY27 [ID: ZY027_1]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]\n\nUSER QUERY: When either deck associate switch (Assoc 2 or Assoc 3) is pressed ON during weekdays between 17:00 and 22:00, set the Switch All to Ignore None and turn all deck lights on."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Weekday deck lights on when assoc switch pressed\",\n    \"parent\": 0,\n    \"comment\": \"When either associated SC sends ON during weekday evening hours, ensure Switch All ignores group overrides and turn all deck lights on.\",\n    \"if\": [\n      { \"(\": 1 },\n        { \"==\": { \"device\": \"ZY027_252N002\", \"control\": \"DON\" } },\n        { \"or\": 1 },\n        { \"==\": { \"device\": \"ZY027_252N003\", \"control\": \"DON\" } },\n      { \")\": 1 },\n      { \"and\": 1 },\n      { \"weekly\": { \"days\": \"mon,tue,wed,thu,fri\", \"from\": { \"time\": \"17:00\", \"to\": { \"time\": \"22:00\" } } } }\n    ],\n    \"then\": [\n      { \"device\": \"ZY027_183\", \"command\": \"ALLSET\", \"parameters\": [ { \"name\": \"n/a\", \"value\": 255, \"uom\": \"25\", \"precision\": 0 } ] },\n      { \"device\": \"ZY027_183\", \"command\": \"ALLON\", \"parameters\": [] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"Use COC from either associated SC (DON) during weekday evening window to trigger setting Switch All to Ignore None (255) and then issue All On to illuminate the deck. Grouping ensures either button works and weekly window restricts to weekdays.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
