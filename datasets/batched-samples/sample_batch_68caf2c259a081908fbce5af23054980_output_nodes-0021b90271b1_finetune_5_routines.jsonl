{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZY 006 Motion Sensor\nID: ZY006_155\nParent: ZY006 Motion Sensor [ID: ZY006_1]\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=78]\n        Off [0]\n        On [100]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]***Device***\nName: ZY 006 Power Alarm\nID: ZY006_309\nParent: ZY006 Motion Sensor [ID: ZY006_1]\n  ***Properties***\n    Power Management [id=ALARM]\n  ***Accept Commands***\n    Query [id=QUERY]***Device***\nName: ZY 006 Wake Up\nID: ZY006_199\nParent: ZY006 Motion Sensor [ID: ZY006_1]\n  ***Properties***\n    Is Awake [id=ST]\n      Enum [uom id=51]\n        False [0]\n        True [100]\n        Unknown [101]\n    Keep Awake [id=GV1]\n      Enum [uom id=78]\n        Off [0]\n        On [100]\n    Wake Interval [id=GV2]\n  ***Accept Commands***\n    Query [id=QUERY]\n    Keep Awake [id=DON]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=78]\n            Off [0]\n            On [100]\n    Keep Awake Off [id=DOF]\n    Set Wake Interval [id=SETIV]\n        Parameter 1: name=n/a [id=n/a]\n          Range 0 to 4660 Unit Hours [uom id=20]\n          Range 0 to 279620 Unit Minutes [uom id=45]\n          Range 0 to 16777215 Unit seconds [uom id=58]\n  ***Send Commands***\n    Keep Awake [id=DON]\n    Keep Awake Off [id=DOF]\n\nUSER QUERY: When motion is detected after sunset (15 minutes after sunset), keep the Wake Up node awake so it stays responsive."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Keep Wake Awake when motion detected after sunset\",\n    \"parent\": 0,\n    \"comment\": \"Enable Keep Awake on motion after sunset+15min\",\n    \"if\": [\n      { \"at\": { \"sunset\": 900 } },\n      { \"and\": 1 },\n      { \"==\": { \"device\": \"ZY006_155\", \"status\": \"ST\", \"value\": 100, \"uom\": \"78\", \"precision\": 0 } }\n    ],\n    \"then\": [\n      { \"device\": \"ZY006_199\", \"command\": \"DON\", \"parameters\": [ { \"name\": \"n/a\", \"value\": 100, \"uom\": \"78\", \"precision\": 0 } ] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"Trigger at 15 minutes after sunset and when the motion sensor reports On (COS). Then send Keep Awake (DON) to the Wake Up node so it stays responsive during motion events at night.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
