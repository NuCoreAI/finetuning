{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: channel_2\nID: n015_300336_2\nParent: 1602-Vue-Main [ID: n015_300336]\n  ***Properties***\n    Killowatts [id=CPW]\n      Range -100000 to 100000 Unit Kilowatts [uom id=30]\n    Hourly KWh [id=GV1]\n      Range -100000 to 100000 Unit kWh [uom id=33]\n    Daily KWh [id=GV2]\n      Range -100000 to 100000 Unit kWh [uom id=33]\n    Monthly KWh [id=GV3]\n      Range -100000 to 100000 Unit kWh [uom id=33]\n  ***Accept Commands***\n    Query [id=QUERY]\n***Device***\nName: channel_3\nID: n015_300336_3\nParent: 1602-Vue-Main [ID: n015_300336]\n  ***Properties***\n    Killowatts [id=CPW]\n      Range -100000 to 100000 Unit Kilowatts [uom id=30]\n    Hourly KWh [id=GV1]\n      Range -100000 to 100000 Unit kWh [uom id=33]\n    Daily KWh [id=GV2]\n      Range -100000 to 100000 Unit kWh [uom id=33]\n    Monthly KWh [id=GV3]\n      Range -100000 to 100000 Unit kWh [uom id=33]\n  ***Accept Commands***\n    Query [id=QUERY]\n***Device***\nName: channel_4\nID: n015_300336_4\nParent: 1602-Vue-Main [ID: n015_300336]\n  ***Properties***\n    Killowatts [id=CPW]\n      Range -100000 to 100000 Unit Kilowatts [uom id=30]\n    Hourly KWh [id=GV1]\n      Range -100000 to 100000 Unit kWh [uom id=33]\n    Daily KWh [id=GV2]\n      Range -100000 to 100000 Unit kWh [uom id=33]\n    Monthly KWh [id=GV3]\n      Range -100000 to 100000 Unit kWh [uom id=33]\n  ***Accept Commands***\n    Query [id=QUERY]\n\nUSER QUERY: When channel_2's Killowatts goes above 5 kW during weekdays between 09:00 and 17:00, immediately query channel_2 and channel_3 to capture readings. Otherwise (if not in that window) just query channel_2."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 1,\n    \"name\": \"Weekday high-power logging for channel_2\",\n    \"parent\": 0,\n    \"comment\": \"Query channel_2 and channel_3 when channel_2 > 5 kW during business hours; otherwise query channel_2\",\n    \"if\": [\n      { \"weekly\": { \"days\": \"mon,tue,wed,thu,fri\", \"from\": { \"time\": \"09:00\", \"to\": { \"time\": \"17:00\" } } } },\n      { \"and\": 1 },\n      { \">\": { \"device\": \"n015_300336_2\", \"status\": \"ST\", \"value\": 5, \"uom\": \"30\", \"precision\": 0 } }\n    ],\n    \"then\": [\n      { \"device\": \"n015_300336_2\", \"command\": \"QUERY\" },\n      { \"device\": \"n015_300336_3\", \"command\": \"QUERY\" }\n    ],\n    \"else\": [\n      { \"device\": \"n015_300336_2\", \"command\": \"QUERY\" }\n    ],\n    \"reasoning\": \"During weekday business hours monitor channel_2 for high instantaneous power (Killowatts CPW uom id 30). If it exceeds 5 kW, capture readings from channel_2 and channel_3 immediately; otherwise maintain a single query of channel_2 for baseline data. Uses weekly schedule + COS numeric comparison.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
