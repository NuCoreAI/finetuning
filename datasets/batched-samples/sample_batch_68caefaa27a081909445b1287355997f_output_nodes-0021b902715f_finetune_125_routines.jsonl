{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZY 015 Switch All {H}\nID: ZY015_183\nParent: Dining Room Chandelier Z [ID: ZY015_1]\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=25]\n        Ignore All On & All Off [0]\n        Ignore All On [1]\n        Ignore All Off [2]\n        Ignore None [255]\n  ***Accept Commands***\n    All On [id=ALLON]\n    All Off [id=ALLOFF]\n    Options [id=ALLSET]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            Ignore All On & All Off [0]\n            Ignore All On [1]\n            Ignore All Off [2]\n            Ignore None [255]\n    Query [id=QUERY]***Device***\nName: ZY 015 SC Assoc Only {H}\nID: ZY015_254\nParent: Dining Room Chandelier Z [ID: ZY015_1]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    None [id=NOP]***Device***\nName: ZY 017 SC Basic Assoc 2 {H}\nID: ZY017_252N002\nParent: Smoke Machine Group [ID: ZY017_1]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]\n\nUSER QUERY: When the smoke machine turns on or off during weekdays from 08:00 to 18:00, set the dining room ZY 015 Switch All Options to 'Ignore All On'."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Set dining chandelier ignore during smoke events on weekdays\",\n    \"parent\": 0,\n    \"comment\": \"When smoke machine toggles during weekdays, set switch options to ignore All On\",\n    \"if\": [\n      { \"(\": 1 },\n        { \"==\": { \"device\": \"ZY017_252N002\", \"control\": \"DON\" } },\n        { \"or\": 1 },\n        { \"==\": { \"device\": \"ZY017_252N002\", \"control\": \"DOF\" } },\n      { \")\": 1 },\n      { \"and\": 1 },\n      { \"weekly\": { \"days\": \"mon,tue,wed,thu,fri\", \"from\": { \"time\": \"08:00\", \"to\": { \"time\": \"18:00\" } } } }\n    ],\n    \"then\": [\n      {\n        \"device\": \"ZY015_183\",\n        \"command\": \"ALLSET\",\n        \"parameters\": [\n          { \"name\": \"n/a\", \"value\": 1, \"uom\": \"25\", \"precision\": 0 }\n        ]\n      }\n    ],\n    \"else\": [],\n    \"reasoning\": \"During weekday working hours, if the smoke machine sends an On or Off event, set the dining chandelier switch to ignore 'All On' to prevent group activations when the smoke machine is operating. Uses the device's ALLSET enum parameter (uom 25) with value 1.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
