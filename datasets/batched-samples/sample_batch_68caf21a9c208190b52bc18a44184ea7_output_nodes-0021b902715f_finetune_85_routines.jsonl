{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZY 003 Scene Responder {H}\nID: ZY003_259\nParent: AV Closet Repeater {H} [ID: ZY003_1]\n  ***Accept Commands***\n    Query [id=QUERY]***Device***\nName: ZY 003 Switch All {H}\nID: ZY003_183\nParent: AV Closet Repeater {H} [ID: ZY003_1]\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=25]\n        Ignore All On & All Off [0]\n        Ignore All On [1]\n        Ignore All Off [2]\n        Ignore None [255]\n  ***Accept Commands***\n    All On [id=ALLON]\n    All Off [id=ALLOFF]\n    Options [id=ALLSET]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            Ignore All On & All Off [0]\n            Ignore All On [1]\n            Ignore All Off [2]\n            Ignore None [255]\n    Query [id=QUERY]***Device***\nName: ZY 003 SC Basic Assoc 2 {H}\nID: ZY003_252N002\nParent: AV Closet Repeater {H} [ID: ZY003_1]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]\n\nUSER QUERY: When the ZY 003 SC Basic Assoc 2 sends On during weekdays from 08:00 to 18:00, set the ZY 003 Switch All options to Ignore None."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Set Switch All to Ignore None when SC Basic sends On on weekdays\",\n    \"parent\": 0,\n    \"comment\": \"\",\n    \"if\": [\n      { \"==\": { \"device\": \"ZY003_252N002\", \"control\": \"DON\" } },\n      { \"and\": 1 },\n      { \"weekly\": { \"days\": \"mon,tue,wed,thu,fri\", \"from\": { \"time\": \"08:00\", \"to\": { \"time\": \"18:00\" } } } }\n    ],\n    \"then\": [\n      { \"device\": \"ZY003_183\", \"command\": \"ALLSET\", \"parameters\": [ { \"name\": \"n/a\", \"value\": 255, \"uom\": \"25\", \"precision\": 0 } ] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"Use the SC Basic's On (send command DON) as a COC trigger and limit to weekday business hours. THEN send ALLSET to Switch All with the provided enum parameter value 255 (Ignore None) so the switch responds normally to group on/off events.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
