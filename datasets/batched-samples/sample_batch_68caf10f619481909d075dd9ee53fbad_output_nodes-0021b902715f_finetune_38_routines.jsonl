{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: lock_5\nID: n010_55218490\nParent: August [ID: n010_controller]\n  ***Properties***\n    Lock Status [id=GV2]\n      Enum [uom id=11]\n        Unlocked [0]\n        Locked [100]\n        Unknown [101]\n    Battery [id=GV1]\n      Range 1 to 100 Unit % [uom id=51] (step of 1 and precision of 1).\n    Door Status [id=GV4]\n      Enum [uom id=79]\n        Open [0]\n        Closed [100]\n    Last User [id=GV5]\n      Range 0 to 999999 Unit Raw [uom id=56]\n  ***Accept Commands***\n    Lock [id=LOCK]\n    Unlock [id=UNLOCK]\n  ***Send Commands***\n    Lock [id=LOCK]\n    Unlock [id=UNLOCK]***Device***\nName: Master Bath Shower Window\nID: n001_8801095fb9040b\nParent: Hue - House 1 [ID: n001_huebridge]\n  ***Properties***\n    Status [id=ST]\n      Range 0 to 100 Unit % [uom id=51]\n    Color Temperature [id=CLITEMP]\n      Range 2000 to 6500 Unit Kelvin [uom id=26] (step of 1 and precision of 1).\n    Transition time [id=RR]\n      Range 0 to 540000 Unit millisecond [uom id=42] (step of 100 and precision of 1).\n    X [id=GV1]\n      Range 0 to 1 Unit Raw [uom id=56]\n    Y [id=GV2]\n      Range 0 to 1 Unit Raw [uom id=56]\n    Hue [id=GV3]\n      Range 0 to 65535 Unit Raw [uom id=56] (step of 1 and precision of 1).\n    Saturation [id=GV4]\n      Range 0 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n    Brightness [id=GV5]\n      Range 1 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n    Reachable [id=GV6]\n      Enum [uom id=2]\n        False [0]\n        True [1]\n  ***Accept Commands***\n    On [id=DON]\n    Off [id=DOF]\n    Fast On [id=DFON]\n    Fast Off [id=DFOF]\n    Brighten [id=BRT]\n    Dim [id=DIM]\n    Fade Up [id=FDUP]\n    Fade Down [id=FDDOWN]\n    Fade Stop [id=FDSTOP]\n    Query [id=QUERY]\n    Set RGB Color [id=SET_COLOR_RGB]\n        Parameter 1: name=Red [id=R]\n          Range 0 to 255 Unit Level [uom id=100] (step of 1 and precision of 1).\n        Parameter 2: name=Green [id=G]\n          Range 0 to 255 Unit Level [uom id=100] (step of 1 and precision of 1).\n        Parameter 3: name=Blue [id=B]\n          Range 0 to 255 Unit Level [uom id=100] (step of 1 and precision of 1).\n        Parameter 4: name=Transition Time [id=D]\n          Range 0 to 540000 Unit millisecond [uom id=42] (step of 100 and precision of 1).\n        Parameter 5: name=Brightness [id=BR]\n          Range 1 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n    Set XY Color [id=SET_COLOR_XY]\n        Parameter 1: name=X [id=X]\n          Range 0 to 1 Unit Raw [uom id=56]\n        Parameter 2: name=Y [id=Y]\n          Range 0 to 1 Unit Raw [uom id=56]\n        Parameter 3: name=Transition Time [id=D]\n          Range 0 to 540000 Unit millisecond [uom id=42] (step of 100 and precision of 1).\n        Parameter 4: name=Brightness [id=BR]\n          Range 1 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n    Set Color [id=SET_COLOR]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            Aqua [1]\n            Azure [2]\n            Beige [3]\n            Blue [4]\n            Chartreuse [5]\n            Coral [6]\n            Crimson [7]\n            Forest Green [8]\n            Fuchsia [9]\n            Golden [10]\n            Gray [11]\n            Green [12]\n            Hot Pink [13]\n            Indigo [14]\n            Lavender [15]\n            Lime [16]\n            Maroon [17]\n            Navy Blue [18]\n            Olive [19]\n            Red [20]\n            Royal Blue [21]\n            Tan [22]\n            Teal [23]\n            White [24]\n    Set Hue [id=SET_HUE]\n        Parameter 1: name=n/a [id=n/a]\n          Range 0 to 65535 Unit Raw [uom id=56] (step of 1 and precision of 1).\n    Set Saturation [id=SET_SAT]\n        Parameter 1: name=n/a [id=n/a]\n          Range 0 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n    Set Brightness [id=SET_BRI]\n        Parameter 1: name=n/a [id=n/a]\n          Range 1 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n    Set Color Temperature [id=CLITEMP]\n        Parameter 1: name=n/a [id=n/a]\n          Range 2000 to 6500 Unit Kelvin [uom id=26] (step of 1 and precision of 1).\n    Set Temp and Brightness [id=SET_CTBR]\n        Parameter 1: name=Color Temperature [id=K]\n          Range 2000 to 6500 Unit Kelvin [uom id=26] (step of 1 and precision of 1).\n        Parameter 2: name=Transition Time [id=D]\n          Range 0 to 540000 Unit millisecond [uom id=42] (step of 100 and precision of 1).\n        Parameter 3: name=Brightness [id=BR]\n          Range 1 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n    Set Transition Time [id=RR]\n        Parameter 1: name=n/a [id=n/a]\n          Range 0 to 540000 Unit millisecond [uom id=42] (step of 100 and precision of 1).\n    Set HSB Color [id=SET_HSB]\n        Parameter 1: name=Hue [id=H]\n          Range 0 to 65535 Unit Raw [uom id=56] (step of 1 and precision of 1).\n        Parameter 2: name=Saturation [id=S]\n          Range 0 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n        Parameter 3: name=Brightness [id=BR]\n          Range 1 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n        Parameter 4: name=Transition Time [id=D]\n          Range 0 to 540000 Unit millisecond [uom id=42] (step of 100 and precision of 1).\n    Set Alert [id=SET_ALERT]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            None [1]\n            Breathe [2]\n            Long Breathe [3]\n    Set Effect [id=SET_EFFECT]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            None [1]\n            Colorloop [2]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]***Device***\nName: Guest Room - Plant\nID: n001_88010923e0a20b\nParent: Hue - House 1 [ID: n001_huebridge]\n  ***Properties***\n    Status [id=ST]\n      Range 0 to 100 Unit % [uom id=51]\n    Color Temperature [id=CLITEMP]\n      Range 2000 to 6500 Unit Kelvin [uom id=26] (step of 1 and precision of 1).\n    Transition time [id=RR]\n      Range 0 to 540000 Unit millisecond [uom id=42] (step of 100 and precision of 1).\n    X [id=GV1]\n      Range 0 to 1 Unit Raw [uom id=56]\n    Y [id=GV2]\n      Range 0 to 1 Unit Raw [uom id=56]\n    Hue [id=GV3]\n      Range 0 to 65535 Unit Raw [uom id=56] (step of 1 and precision of 1).\n    Saturation [id=GV4]\n      Range 0 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n    Brightness [id=GV5]\n      Range 1 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n    Reachable [id=GV6]\n      Enum [uom id=2]\n        False [0]\n        True [1]\n  ***Accept Commands***\n    On [id=DON]\n    Off [id=DOF]\n    Fast On [id=DFON]\n    Fast Off [id=DFOF]\n    Brighten [id=BRT]\n    Dim [id=DIM]\n    Fade Up [id=FDUP]\n    Fade Down [id=FDDOWN]\n    Fade Stop [id=FDSTOP]\n    Query [id=QUERY]\n    Set RGB Color [id=SET_COLOR_RGB]\n        Parameter 1: name=Red [id=R]\n          Range 0 to 255 Unit Level [uom id=100] (step of 1 and precision of 1).\n        Parameter 2: name=Green [id=G]\n          Range 0 to 255 Unit Level [uom id=100] (step of 1 and precision of 1).\n        Parameter 3: name=Blue [id=B]\n          Range 0 to 255 Unit Level [uom id=100] (step of 1 and precision of 1).\n        Parameter 4: name=Transition Time [id=D]\n          Range 0 to 540000 Unit millisecond [uom id=42] (step of 100 and precision of 1).\n        Parameter 5: name=Brightness [id=BR]\n          Range 1 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n    Set XY Color [id=SET_COLOR_XY]\n        Parameter 1: name=X [id=X]\n          Range 0 to 1 Unit Raw [uom id=56]\n        Parameter 2: name=Y [id=Y]\n          Range 0 to 1 Unit Raw [uom id=56]\n        Parameter 3: name=Transition Time [id=D]\n          Range 0 to 540000 Unit millisecond [uom id=42] (step of 100 and precision of 1).\n        Parameter 4: name=Brightness [id=BR]\n          Range 1 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n    Set Color [id=SET_COLOR]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            Aqua [1]\n            Azure [2]\n            Beige [3]\n            Blue [4]\n            Chartreuse [5]\n            Coral [6]\n            Crimson [7]\n            Forest Green [8]\n            Fuchsia [9]\n            Golden [10]\n            Gray [11]\n            Green [12]\n            Hot Pink [13]\n            Indigo [14]\n            Lavender [15]\n            Lime [16]\n            Maroon [17]\n            Navy Blue [18]\n            Olive [19]\n            Red [20]\n            Royal Blue [21]\n            Tan [22]\n            Teal [23]\n            White [24]\n    Set Hue [id=SET_HUE]\n        Parameter 1: name=n/a [id=n/a]\n          Range 0 to 65535 Unit Raw [uom id=56] (step of 1 and precision of 1).\n    Set Saturation [id=SET_SAT]\n        Parameter 1: name=n/a [id=n/a]\n          Range 0 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n    Set Brightness [id=SET_BRI]\n        Parameter 1: name=n/a [id=n/a]\n          Range 1 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n    Set Color Temperature [id=CLITEMP]\n        Parameter 1: name=n/a [id=n/a]\n          Range 2000 to 6500 Unit Kelvin [uom id=26] (step of 1 and precision of 1).\n    Set Temp and Brightness [id=SET_CTBR]\n        Parameter 1: name=Color Temperature [id=K]\n          Range 2000 to 6500 Unit Kelvin [uom id=26] (step of 1 and precision of 1).\n        Parameter 2: name=Transition Time [id=D]\n          Range 0 to 540000 Unit millisecond [uom id=42] (step of 100 and precision of 1).\n        Parameter 3: name=Brightness [id=BR]\n          Range 1 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n    Set Transition Time [id=RR]\n        Parameter 1: name=n/a [id=n/a]\n          Range 0 to 540000 Unit millisecond [uom id=42] (step of 100 and precision of 1).\n    Set HSB Color [id=SET_HSB]\n        Parameter 1: name=Hue [id=H]\n          Range 0 to 65535 Unit Raw [uom id=56] (step of 1 and precision of 1).\n        Parameter 2: name=Saturation [id=S]\n          Range 0 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n        Parameter 3: name=Brightness [id=BR]\n          Range 1 to 254 Unit Level [uom id=100] (step of 1 and precision of 1).\n        Parameter 4: name=Transition Time [id=D]\n          Range 0 to 540000 Unit millisecond [uom id=42] (step of 100 and precision of 1).\n    Set Alert [id=SET_ALERT]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            None [1]\n            Breathe [2]\n            Long Breathe [3]\n    Set Effect [id=SET_EFFECT]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            None [1]\n            Colorloop [2]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]\n\nUSER QUERY: Double-tap the Guest Room - Plant (two quick presses) during weekdays 09:00-17:00 to set it to green color and brightness 200."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 1,\n    \"name\": \"Weekday double-tap -> Guest Room Plant green 200\",\n    \"parent\": 0,\n    \"comment\": \"When Guest Room - Plant is double-tapped (DFON with tapCount=2) during weekdays 09:00-17:00 set color to Green and brightness to 200.\",\n    \"if\": [\n      { \"(\": 1 },\n        { \"==\": { \"device\": \"n001_88010923e0a20b\", \"control\": \"DFON\", \"parameters\": [ { \"name\": \"tapCount\", \"value\": 2, \"uom\": \"108\", \"precision\": 0 } ] } },\n      { \")\": 1 },\n      { \"and\": 1 },\n      { \"weekly\": { \"days\": \"mon,tue,wed,thu,fri\", \"from\": { \"time\": \"09:00\", \"to\": { \"time\": \"17:00\" } } } }\n    ],\n    \"then\": [\n      { \"device\": \"n001_88010923e0a20b\", \"command\": \"SET_COLOR\", \"parameters\": [ { \"name\": \"n/a\", \"value\": 12, \"uom\": \"25\", \"precision\": 0 } ] },\n      { \"device\": \"n001_88010923e0a20b\", \"command\": \"SET_BRI\", \"parameters\": [ { \"name\": \"n/a\", \"value\": 200, \"uom\": \"100\", \"precision\": 1 } ] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"Use COC (double-tap DFON with tapCount=2) limited to weekdays 09:00-17:00 to avoid accidental triggers; then set named color enum Green (12) and explicit brightness using SET_BRI to 200 (within 1-254 range).\")\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
