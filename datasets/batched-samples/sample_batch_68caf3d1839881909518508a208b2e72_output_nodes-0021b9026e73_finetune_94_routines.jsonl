{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZY 037 System Alarm\nID: ZY037_310\nParent: ZY 037 Dimmer Switch [ID: ZY037_1]\n  ***Properties***\n    System Alarm [id=ALARM]\n  ***Accept Commands***\n    Query [id=QUERY]***Device***\nName: ZY 037 Hardware Failure Alarm\nID: ZY037_174\nParent: ZY 037 Dimmer Switch [ID: ZY037_1]\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=78]\n        Off [0]\n        On [100]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]***Device***\nName: ZY 037 Multilevel Sensor\nID: ZY037_118\nParent: ZY 037 Dimmer Switch [ID: ZY037_1]\n  ***Properties***\n    Current Voltage [id=CV]\n  ***Accept Commands***\n    Query [id=QUERY]\n\nUSER QUERY: When the hardware failure alarm sends On (DON) during weekdays from 08:00 to 18:00, automatically query the multilevel sensor and the system alarm."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"HardwareFailure DON during weekdays -> query sensors\",\n    \"parent\": 0,\n    \"comment\": \"When ZY037_174 sends DON during weekday business hours, query diagnostics from sensors.\",\n    \"if\": [\n      { \"(\": 1 },\n        { \"==\": { \"device\": \"ZY037_174\", \"control\": \"DON\" } },\n      { \")\": 1 },\n      { \"and\": 1 },\n      { \"weekly\": { \"days\": \"mon,tue,wed,thu,fri\", \"from\": { \"time\": \"08:00\", \"to\": { \"time\": \"18:00\" } } } }\n    ],\n    \"then\": [\n      { \"device\": \"ZY037_118\", \"command\": \"QUERY\" },\n      { \"device\": \"ZY037_310\", \"command\": \"QUERY\" }\n    ],\n    \"else\": [],\n    \"reasoning\": \"Listen for the hardware failure alarm's send event (DON). Restrict to weekday business hours to avoid unnecessary queries. When triggered, query the multilevel sensor and system alarm to gather current diagnostics.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
