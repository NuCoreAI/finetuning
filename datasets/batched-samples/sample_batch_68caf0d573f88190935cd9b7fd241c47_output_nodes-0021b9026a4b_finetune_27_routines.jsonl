{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZY058-Scene Responder\nID: ZY058_259\nParent: GAR2-WORK LTS-ZY058_1_SW [ID: ZY058_1]\n  ***Accept Commands***\n    Query [id=QUERY]\n***Device***\nName: ZY 185 Power Alarm\nID: ZY185_309\nParent: GAR0-SENSOR_01-ZY185 [ID: ZY185_1]\n  ***Properties***\n    Power Management [id=ALARM]\n  ***Accept Commands***\n    Query [id=QUERY]\n***Device***\nName: \u00bdBTH1-LTS-ZY052_1_SW\nID: ZY052_1\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=78]\n        Off [0]\n        On [100]\n        Unknown [101]\n    Responding [id=ERR]\n      Enum [uom id=25]\n        True [0]\n        False [1]\n  ***Accept Commands***\n    On [id=DON]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=78]\n            Off [0]\n            On [100]\n    Off [id=DOF]\n    Query [id=QUERY]\n    Set Configuration [id=CONFIG]\n        Parameter 1: name=Parameter Number [id=NUM]\n        Parameter 2: name=Parameter Value [id=VAL]\n          Range 0 to 255 Unit 1 Byte (Unsigned) [uom id=107]\n          Range 0 to 65535 Unit 2 Bytes (Unsigned) [uom id=108]\n          Range 0 to 4294967295 Unit 4 Bytes (Unsigned) [uom id=110]\n          Range -128 to 127 Unit 1 Byte [uom id=111]\n          Range -32768 to 32767 Unit 2 Byte [uom id=112]\n          Range -2147483648 to 214748647 Unit 4 Byte [uom id=114]\n    Write Changes [id=WDU]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]\n\nUSER QUERY: When the physical bathroom switch (ZY052_1) is pressed ON manually, and it is between 22:00 and 06:00 (night), immediately turn that switch off to prevent overnight lighting."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Night manual-on auto-off\",\n    \"parent\": 0,\n    \"comment\": \"Turn off manual ON presses during night hours\",\n    \"if\": [\n      { \"==\": { \"device\": \"ZY052_1\", \"control\": \"DON\" } },\n      { \"and\": 1 },\n      { \"from\": { \"time\": \"22:00\", \"to\": { \"time\": \"06:00\", \"day\": 1 } } }\n    ],\n    \"then\": [\n      { \"device\": \"ZY052_1\", \"command\": \"DOF\", \"parameters\": [] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"When a physical ON (COC) occurs on the bathroom switch during the defined nighttime window, automatically issue DOF to ensure the light is not left on overnight. This uses the device's accept commands and the nightly schedule to limit the action to 22:00-06:00.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
