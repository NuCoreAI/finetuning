{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZY 007 Scene Button 2\nID: ZY007_201N002\nParent: ZY007 Shop Rear Overhead [ID: ZY007_1]\n  ***Properties***\n    Status [id=ST]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Fade Stop [id=FDSTOP]\n    Fade Up [id=FDUP]\n    Fast On [id=DFON]\n    Triple Press (On) [id=DON3]\n    4 x Press (On) [id=DON4]\n    5 x Press (On) [id=DON5]***Device***\nName: ZY 007 SC Basic Assoc 2\nID: ZY007_252N002\nParent: ZY007 Shop Rear Overhead [ID: ZY007_1]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]***Device***\nName: ZY 007 SC Basic Assoc 3\nID: ZY007_252N003\nParent: ZY007 Shop Rear Overhead [ID: ZY007_1]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]\n\nUSER QUERY: When I fast-press the rear overhead scene button (ZY007_201N002) during weekdays between 09:00 and 18:00, turn on both ZY007_252N002 and ZY007_252N003."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 1001,\n    \"name\": \"Weekday fast-press turns on rear overhead lights\",\n    \"parent\": 0,\n    \"comment\": \"Fast On (DFON) during business hours\",\n    \"if\": [\n      { \"(\": 1 },\n        { \"==\": { \"device\": \"ZY007_201N002\", \"control\": \"DFON\" } },\n      { \")\": 1 },\n      { \"and\": 1 },\n      { \"weekly\": { \"days\": \"mon,tue,wed,thu,fri\", \"from\": { \"time\": \"09:00\", \"to\": { \"time\": \"18:00\" } } } }\n    ],\n    \"then\": [\n      { \"device\": \"ZY007_252N002\", \"command\": \"DON\" },\n      { \"device\": \"ZY007_252N003\", \"command\": \"DON\" }\n    ],\n    \"else\": [],\n    \"reasoning\": \"Use a COC trigger (Fast On/DFON) from the scene button during weekday business hours to reliably turn on both associated overhead devices. Grouped trigger ensures the physical button press is required and limited to the scheduled window.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
