{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: Master Bedroom Sliding Glass.\nID: 21 64 BF 2\nParent: Master Bedroom Sliding Glass [ID: 21 64 BF 1]\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=51]\n        Off [0]\n        On [100]\n    Responding [id=ERR]\n      Enum [uom id=25]\n        True [0]\n        False [1]\n  ***Accept Commands***\n    Query [id=QUERY]\n    Beep [id=BEEP]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=100]\n    Write Changes [id=WDU]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]\n    Fast On [id=DFON]\n    Fast Off [id=DFOF]***Device***\nName: Living Room - LR 1\nID: n005_shade10313\nParent: HunterDouglas [ID: n005_hdctrl]\n  ***Properties***\n    Id [id=GV0]\n      Range 0 to 9999 Unit 1 Byte (Unsigned) [uom id=107]\n    Motion [id=ST]\n      Enum [uom id=2]\n        False [0]\n        True [1]\n    RoomID [id=GV1]\n      Range 0 to 9999 Unit 1 Byte (Unsigned) [uom id=107]\n    Primary [id=GV2]\n      Enum [uom id=2]\n        False [0]\n      Range 0 to 100 Unit Level [uom id=100]\n    Tilt [id=GV4]\n      Enum [uom id=2]\n        False [0]\n      Range 0 to 100 Unit Level [uom id=100]\n    Capabilities [id=GV5]\n      Enum [uom id=25]\n        Bottom Up [0]\n        Bottom Up w/ 90\u00b0 Tilt [1]\n        Bottom Up w/ 180\u00b0 Tilt [2]\n        Vertical (Traversing) [3]\n        Vertical (Traversing) w/ 180\u00b0 Tilt [4]\n        Tilt Only 180\u00b0 [5]\n        Top Down [6]\n        Top-Down/Bottom-Up [7]\n        Duolite [8]\n        Duolite with 90\u00b0 Tilt [9]\n        Duolite with 180\u00b0 Tilt [10]\n    Battery [id=GV6]\n      Enum [uom id=25]\n        No Status [0]\n        Low [1]\n        Medium [2]\n        High [3]\n        Plugged In [4]\n  ***Accept Commands***\n    Open [id=OPEN]\n    Close [id=CLOSE]\n    Stop [id=STOP]\n    Tilt Open [id=TILTOPEN]\n    Tilt Close [id=TILTCLOSE]\n    Jog [id=JOG]\n    Query [id=QUERY]\n    Set Shade Position [id=SETPOS]\n        Parameter 1: name=Primary [id=SETPRIM]\n          Enum [uom id=2]\n            False [0]\n          Range 0 to 100 Unit Level [uom id=100]\n        Parameter 2: name=Tilt [id=SETTILT]\n          Enum [uom id=2]\n            False [0]\n          Range 0 to 100 Unit Level [uom id=100]\n  ***Send Commands***\n    Open [id=OPEN]\n    Close [id=CLOSE]\n    Stop [id=STOP]\n    Tilt Open [id=TILTOPEN]\n    Tilt Close [id=TILTCLOSE]\n    Jog [id=JOG]***Device***\nName: Dining Room - DR 3\nID: n005_shade38301\nParent: HunterDouglas [ID: n005_hdctrl]\n  ***Properties***\n    Id [id=GV0]\n      Range 0 to 9999 Unit 1 Byte (Unsigned) [uom id=107]\n    Motion [id=ST]\n      Enum [uom id=2]\n        False [0]\n        True [1]\n    RoomID [id=GV1]\n      Range 0 to 9999 Unit 1 Byte (Unsigned) [uom id=107]\n    Primary [id=GV2]\n      Enum [uom id=2]\n        False [0]\n      Range 0 to 100 Unit Level [uom id=100]\n    Tilt [id=GV4]\n      Enum [uom id=2]\n        False [0]\n      Range 0 to 100 Unit Level [uom id=100]\n    Capabilities [id=GV5]\n      Enum [uom id=25]\n        Bottom Up [0]\n        Bottom Up w/ 90\u00b0 Tilt [1]\n        Bottom Up w/ 180\u00b0 Tilt [2]\n        Vertical (Traversing) [3]\n        Vertical (Traversing) w/ 180\u00b0 Tilt [4]\n        Tilt Only 180\u00b0 [5]\n        Top Down [6]\n        Top-Down/Bottom-Up [7]\n        Duolite [8]\n        Duolite with 90\u00b0 Tilt [9]\n        Duolite with 180\u00b0 Tilt [10]\n    Battery [id=GV6]\n      Enum [uom id=25]\n        No Status [0]\n        Low [1]\n        Medium [2]\n        High [3]\n        Plugged In [4]\n  ***Accept Commands***\n    Open [id=OPEN]\n    Close [id=CLOSE]\n    Stop [id=STOP]\n    Tilt Open [id=TILTOPEN]\n    Tilt Close [id=TILTCLOSE]\n    Jog [id=JOG]\n    Query [id=QUERY]\n    Set Shade Position [id=SETPOS]\n        Parameter 1: name=Primary [id=SETPRIM]\n          Enum [uom id=2]\n            False [0]\n          Range 0 to 100 Unit Level [uom id=100]\n        Parameter 2: name=Tilt [id=SETTILT]\n          Enum [uom id=2]\n            False [0]\n          Range 0 to 100 Unit Level [uom id=100]\n  ***Send Commands***\n    Open [id=OPEN]\n    Close [id=CLOSE]\n    Stop [id=STOP]\n    Tilt Open [id=TILTOPEN]\n    Tilt Close [id=TILTCLOSE]\n    Jog [id=JOG]\n\nUSER QUERY: When I tap the Master Bedroom Sliding Glass fast-on (DFON) open the Living Room shade to 60% on weekdays 07:00-09:00, otherwise close it."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\"routine\": {\n  \"id\": 101,\n  \"name\": \"Tap Master Sliding to set Living Room shade weekdays 07-09\",\n  \"parent\": 0,\n  \"comment\": \"Activated by Fast On (DFON) on Master Sliding Glass; weekday time window\",\n  \"if\": [\n    { \"(\": 1 },\n      { \"==\": { \"device\": \"21 64 BF 2\", \"control\": \"DFON\" } },\n      { \"and\": 1 },\n      { \"weekly\": { \"days\": \"mon,tue,wed,thu,fri\", \"from\": { \"time\": \"07:00\", \"to\": { \"time\": \"09:00\" } } } },\n    { \")\": 1 }\n  ],\n  \"then\": [\n    { \"device\": \"n005_shade10313\", \"command\": \"SETPOS\", \"parameters\": [ { \"name\": \"Primary\", \"value\": 60, \"uom\": \"100\", \"precision\": 2 } ] }\n  ],\n  \"else\": [\n    { \"device\": \"n005_shade10313\", \"command\": \"CLOSE\", \"parameters\": [] }\n  ],\n  \"reasoning\": \"When the Master Bedroom Sliding Glass receives a DFON control during weekday morning window, set the Living Room (LR 1) primary shade to 60% for daylight; otherwise close it for privacy. Uses DFON COC + weekly schedule to limit effect.\"\n}}\n__END_NUCORE_ROUTINE__"}]}
