{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: UD Mobile\nID: n003_udmobile\nParent: Notification Controller [ID: n003_controller]\n  ***Properties***\n    Last Status [id=ST]\n      Enum [uom id=2]\n        False [0]\n        True [1]\n    Error [id=ERR]\n      Enum [uom id=25]\n        None [0]\n        Illegal Value [1]\n        App Auth [2]\n        User Auth [3]\n        Create Message [4]\n        Send Message [5]\n        Bad Parameter [6]\n  ***Accept Commands***\n    Send Message [id=GV10]\n        Parameter 1: name=Group [id=Group]\n          Enum [uom id=25]\n            REMOVED-default [0]\n        Parameter 2: name=Sound [id=Sound]\n          Enum [uom id=25]\n            default [0]\n            Clock Radio Alarm [1]\n            SMS Notification [2]\n            Dog Bark [3]\n            Small Resonant Alarm [4]\n            Software Start Positive [5]\n            UI Notification [6]\n            Alarm Burglar [7]\n            Rooster Crowing [8]\n            Hawk [9]\n        Parameter 3: name=Content [id=Content]***Device***\nName: ZY028-Switch All\nID: ZY028_183\nParent: GAR1-OH LTS-ZY028_1 [ID: ZY028_1]\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=25]\n        Ignore All On & All Off [0]\n        Ignore All On [1]\n        Ignore All Off [2]\n        Ignore None [255]\n  ***Accept Commands***\n    All On [id=ALLON]\n    All Off [id=ALLOFF]\n    Options [id=ALLSET]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            Ignore All On & All Off [0]\n            Ignore All On [1]\n            Ignore All Off [2]\n            Ignore None [255]\n    Query [id=QUERY]***Device***\nName: ZY 170 Tamper Sensor\nID: ZY170_378\nParent: LR0-SENSOR-ZY170 [ID: ZY170_1]\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=78]\n        Off [0]\n        On [100]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]\n\nUSER QUERY: When the ZY 170 Tamper Sensor changes to On during weekday working hours (08:00-18:00, Mon-Fri), send an SMS-style notification to the UD Mobile and set the garage \"Switch All\" Options to \"Ignore None\"."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Weekday tamper alert: notify mobile and set switch options\",\n    \"parent\": 0,\n    \"comment\": \"Trigger when tamper sensor trips during weekday hours\",\n    \"if\": [\n      { \">=\": { \"device\": \"ZY170_378\", \"status\": \"ST\", \"value\": 100, \"uom\": \"78\", \"precision\": 0 } },\n      { \"and\": 1 },\n      { \"weekly\": { \"days\": \"mon,tue,wed,thu,fri\", \"from\": { \"time\": \"08:00\", \"to\": { \"time\": \"18:00\" } } } }\n    ],\n    \"then\": [\n      { \"device\": \"n003_udmobile\", \"command\": \"GV10\", \"parameters\": [ { \"name\": \"Group\", \"value\": 0, \"uom\": \"25\", \"precision\": 0 }, { \"name\": \"Sound\", \"value\": 2, \"uom\": \"25\", \"precision\": 0 } ] },\n      { \"device\": \"ZY028_183\", \"command\": \"ALLSET\", \"parameters\": [ { \"name\": \"n/a\", \"value\": 255, \"uom\": \"25\", \"precision\": 0 } ] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"When the ZY170 tamper sensor state rises to On (ST >= 100) during weekday business hours, immediately notify the UD Mobile with an SMS-style alert (Sound=2) and set the garage 'Switch All' Options to Ignore None (255) so group commands apply.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
