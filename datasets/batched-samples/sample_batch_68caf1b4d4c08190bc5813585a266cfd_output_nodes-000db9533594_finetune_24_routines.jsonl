{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: Default Room - Close All\nID: n005_scene9382\nParent: HunterDouglas [ID: n005_hdctrl]\n  ***Properties***\n    Id [id=GV0]\n      Range 0 to 9999 Unit 1 Byte (Unsigned) [uom id=107]\n    Activated [id=ST]\n      Enum [uom id=2]\n        False [0]\n        True [1]\n  ***Accept Commands***\n    Activate [id=ACTIVATE]\n    Query [id=QUERY]\n  ***Send Commands***\n    Activate [id=ACTIVATE]***Device***\nName: Default Room - Open All\nID: n005_scene64125\nParent: HunterDouglas [ID: n005_hdctrl]\n  ***Properties***\n    Id [id=GV0]\n      Range 0 to 9999 Unit 1 Byte (Unsigned) [uom id=107]\n    Activated [id=ST]\n      Enum [uom id=2]\n        False [0]\n        True [1]\n  ***Accept Commands***\n    Activate [id=ACTIVATE]\n    Query [id=QUERY]\n  ***Send Commands***\n    Activate [id=ACTIVATE]***Device***\nName: Default Room - Sun In My Eyes\nID: n005_scene59012\nParent: HunterDouglas [ID: n005_hdctrl]\n  ***Properties***\n    Id [id=GV0]\n      Range 0 to 9999 Unit 1 Byte (Unsigned) [uom id=107]\n    Activated [id=ST]\n      Enum [uom id=2]\n        False [0]\n        True [1]\n  ***Accept Commands***\n    Activate [id=ACTIVATE]\n    Query [id=QUERY]\n  ***Send Commands***\n    Activate [id=ACTIVATE]\n\nUSER QUERY: When I manually activate the \"Sun In My Eyes\" scene or when the sun sets, activate \"Open All\"."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Open All when SunInMyEyes pressed or at sunset\",\n    \"parent\": 0,\n    \"comment\": \"Activate Open All when Sun In My Eyes is manually activated or at sunset.\",\n    \"if\": [\n      { \"(\": 1 },\n        { \"==\": { \"device\": \"n005_scene59012\", \"control\": \"ACTIVATE\" } },\n        { \"or\": 1 },\n        { \"at\": { \"sunset\": 0 } },\n      { \")\": 1 }\n    ],\n    \"then\": [\n      { \"device\": \"n005_scene64125\", \"command\": \"ACTIVATE\", \"parameters\": [] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"User intends either a manual control (COC) of the Sun In My Eyes scene or the sunset schedule to trigger opening all shades. Map both triggers to the Open All scene ACTIVATE command.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
