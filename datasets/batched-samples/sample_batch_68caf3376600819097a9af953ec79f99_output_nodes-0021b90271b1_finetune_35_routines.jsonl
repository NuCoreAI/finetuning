{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZY 015 Tamper Alarm\nID: ZY015_157\nParent: ZY015 Motion Sensor [ID: ZY015_1]\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=78]\n        Off [0]\n        On [100]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]***Device***\nName: ZY 015 Motion Sensor\nID: ZY015_155\nParent: ZY015 Motion Sensor [ID: ZY015_1]\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=78]\n        Off [0]\n        On [100]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]***Device***\nName: ZY 015 Power Alarm\nID: ZY015_309\nParent: ZY015 Motion Sensor [ID: ZY015_1]\n  ***Properties***\n    Power Management [id=ALARM]\n  ***Accept Commands***\n    Query [id=QUERY]\n\nUSER QUERY: When the motion sensor (ZY 015 Motion Sensor) turns ON between 22:00 and 06:00, query the tamper alarm and power alarm for their current status."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Night motion queries\",\n    \"parent\": 0,\n    \"comment\": \"Query tamper and power alarms when motion turns on overnight\",\n    \"if\": [\n      { \"from\": { \"time\":\"22:00\",\"to\":{ \"time\":\"06:00\",\"day\":1 } } },\n      { \"and\": 1 },\n      { \"==\": { \"device\":\"ZY015_155\",\"status\":\"ST\",\"value\":100,\"uom\":\"78\",\"precision\":0 } }\n    ],\n    \"then\": [\n      { \"device\":\"ZY015_157\",\"command\":\"QUERY\",\"parameters\":[] },\n      { \"device\":\"ZY015_309\",\"command\":\"QUERY\",\"parameters\":[] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"When the motion sensor reports On during the overnight window (COS), query the tamper and power alarm devices to obtain their current status for security verification. Queries use each device's accepted QUERY command.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
