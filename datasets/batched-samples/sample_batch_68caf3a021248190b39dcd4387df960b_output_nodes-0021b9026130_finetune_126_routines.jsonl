{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZY 036 Motion Sensor\nID: ZY036_155\nParent: ZY 036 Home Security Alarm [ID: ZY036_1]\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=78]\n        Off [0]\n        On [100]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]***Device***\nName: ZY 036 Power Alarm\nID: ZY036_309\nParent: ZY 036 Home Security Alarm [ID: ZY036_1]\n  ***Properties***\n    Power Management [id=ALARM]\n  ***Accept Commands***\n    Query [id=QUERY]***Device***\nName: ZY 036 Multilevel Sensor\nID: ZY036_118\nParent: ZY 036 Home Security Alarm [ID: ZY036_1]\n  ***Properties***\n    Temperature [id=CLITEMP]\n    Luminance [id=LUMIN]\n  ***Accept Commands***\n    Query [id=QUERY]\n\nUSER QUERY: When the ZY 036 Motion Sensor (ZY036_155) sends an On (motion detected) event between 22:00 and 06:00 (overnight), query the ZY 036 Power Alarm (ZY036_309) and the ZY 036 Multilevel Sensor (ZY036_118) immediately."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Night motion queries for alarms\",\n    \"parent\": 0,\n    \"comment\": \"When motion detected at night, query alarms and sensors\",\n    \"if\": [\n      { \"==\": { \"device\": \"ZY036_155\", \"control\": \"DON\" } },\n      { \"and\": 1 },\n      { \"from\": { \"time\": \"22:00\", \"to\": { \"time\": \"06:00\", \"day\": 1 } } }\n    ],\n    \"then\": [\n      { \"device\": \"ZY036_309\", \"command\": \"QUERY\", \"parameters\": [] },\n      { \"device\": \"ZY036_118\", \"command\": \"QUERY\", \"parameters\": [] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"Trigger on motion sensor 'On' (DON) during overnight hours to immediately query the power alarm and multilevel sensor for current status. Queries are used because these devices accept only the QUERY command.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
