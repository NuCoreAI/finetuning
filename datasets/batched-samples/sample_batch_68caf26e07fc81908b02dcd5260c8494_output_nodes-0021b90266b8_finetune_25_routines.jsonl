{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZY 021 Switch All\nID: ZY021_183\nParent: Office Light [ID: ZY021_1]\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=25]\n        Ignore All On & All Off [0]\n        Ignore All On [1]\n        Ignore All Off [2]\n        Ignore None [255]\n  ***Accept Commands***\n    All On [id=ALLON]\n    All Off [id=ALLOFF]\n    Options [id=ALLSET]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            Ignore All On & All Off [0]\n            Ignore All On [1]\n            Ignore All Off [2]\n            Ignore None [255]\n    Query [id=QUERY]\n\nUSER QUERY: Double-tap the Switch All (All On) during weekdays 08:00-18:00 to set Options to Ignore None; otherwise turn All Off."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Weekday double-tap sets SwitchAll to Ignore None else All Off\",\n    \"parent\": 0,\n    \"comment\": \"Double-tap (physical All On control) during business hours sets Options to Ignore None; otherwise ensure all off.\",\n    \"if\": [\n      { \"==\": { \"device\": \"ZY021_183\", \"control\": \"ALLON\" } },\n      { \"and\": 1 },\n      { \"weekly\": { \"days\": \"mon,tue,wed,thu,fri\", \"from\": { \"time\": \"08:00\", \"to\": { \"time\": \"18:00\" } } } }\n    ],\n    \"then\": [\n      { \"device\": \"ZY021_183\", \"command\": \"ALLSET\", \"parameters\": [ { \"name\": \"n/a\", \"value\": 255, \"uom\": \"25\", \"precision\": 0 } ] }\n    ],\n    \"else\": [\n      { \"device\": \"ZY021_183\", \"command\": \"ALLOFF\", \"parameters\": [] }\n    ],\n    \"reasoning\": \"When the user physically triggers the 'All On' control during weekday work hours, set the switch all Options to 'Ignore None' (255) so individual controls operate normally. If the trigger does not occur in that window, default to turning everything off to avoid unintended states.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
