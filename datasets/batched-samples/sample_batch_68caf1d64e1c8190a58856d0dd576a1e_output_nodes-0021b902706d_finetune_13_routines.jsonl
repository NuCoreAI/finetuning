{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZW 002 On-Off Power Switch\nID: ZY002_1\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=78]\n        Off [0]\n        On [100]\n        Unknown [101]\n    Responding [id=ERR]\n      Enum [uom id=25]\n        True [0]\n        False [1]\n  ***Accept Commands***\n    On [id=DON]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=78]\n            Off [0]\n            On [100]\n    Off [id=DOF]\n    Query [id=QUERY]\n    Set Configuration [id=CONFIG]\n        Parameter 1: name=Parameter Number [id=NUM]\n        Parameter 2: name=Parameter Value [id=VAL]\n          Range 0 to 255 Unit 1 Byte (Unsigned) [uom id=107]\n          Range 0 to 65535 Unit 2 Bytes (Unsigned) [uom id=108]\n          Range 0 to 4294967295 Unit 4 Bytes (Unsigned) [uom id=110]\n          Range -128 to 127 Unit 1 Byte [uom id=111]\n          Range -32768 to 32767 Unit 2 Byte [uom id=112]\n          Range -2147483648 to 214748647 Unit 4 Byte [uom id=114]\n    Write Changes [id=WDU]\n  ***Send Commands***\n    Hail [id=HAIL]\n    On [id=DON]\n    Off [id=DOF]\n***Device***\nName: ZW 002 Energy Meter\nID: ZY002_143\nParent: ZW 002 On-Off Power Switch [ID: ZY002_1]\n  ***Properties***\n    Total Energy [id=TPW]\n    Current Power [id=CPW]\n  ***Accept Commands***\n    Reset [id=RESET]\n    Query [id=QUERY]\n***Device***\nName: Kitchen Dimmer\nID: ZY003_1\n  ***Properties***\n    Status [id=ST]\n    Responding [id=ERR]\n      Enum [uom id=25]\n        True [0]\n        False [1]\n  ***Accept Commands***\n    On [id=DON]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            Previous Value [1]\n          Range 0 to 100 Unit % [uom id=51]\n    Off [id=DOF]\n    Fast On [id=DFON]\n    Fast Off [id=DFOF]\n    Brighten [id=BRT]\n    Dim [id=DIM]\n    Fade Up [id=FDUP]\n        Parameter 1: name=Start Level [id=STARTLEVEL]\n          Enum [uom id=25]\n            Previous Value [1]\n          Range 0 to 100 Unit % [uom id=51]\n    Fade Down [id=FDDOWN]\n        Parameter 1: name=Start Level [id=STARTLEVEL]\n          Enum [uom id=25]\n            Previous Value [1]\n          Range 0 to 100 Unit % [uom id=51]\n    Fade Stop [id=FDSTOP]\n    Query [id=QUERY]\n    Set Configuration [id=CONFIG]\n        Parameter 1: name=Parameter Number [id=NUM]\n        Parameter 2: name=Parameter Value [id=VAL]\n          Range 0 to 255 Unit 1 Byte (Unsigned) [uom id=107]\n          Range 0 to 65535 Unit 2 Bytes (Unsigned) [uom id=108]\n          Range 0 to 4294967295 Unit 4 Bytes (Unsigned) [uom id=110]\n          Range -128 to 127 Unit 1 Byte [uom id=111]\n          Range -32768 to 32767 Unit 2 Byte [uom id=112]\n          Range -2147483648 to 214748647 Unit 4 Byte [uom id=114]\n    Write Changes [id=WDU]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]\n    Fade Up [id=FDUP]\n    Fade Down [id=FDDOWN]\n    Fade Stop [id=FDSTOP]\n\nUSER QUERY: When I fast-on (DFON) the Kitchen Dimmer in the evening (between 18:00 and 23:00), turn on the ZW 002 power switch and set the dimmer to 100%."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Evening double-tap turns on power and full bright\",\n    \"parent\": 0,\n    \"comment\": \"When Kitchen Dimmer DFON during 18:00-23:00, turn on switch and set dimmer to 100%.\",\n    \"if\": [\n      { \"from\": { \"time\": \"18:00\", \"to\": { \"time\": \"23:00\", \"day\": 0 } } },\n      { \"and\": 1 },\n      { \"==\": { \"device\": \"ZY003_1\", \"control\": \"DFON\" } }\n    ],\n    \"then\": [\n      { \"device\": \"ZY002_1\", \"command\": \"DON\" },\n      { \"device\": \"ZY003_1\", \"command\": \"DON\", \"parameters\": [ { \"name\": \"n/a\", \"value\": 100, \"uom\": \"51\", \"precision\": 2 } ] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"User requests that a fast-on (DFON) action on the Kitchen Dimmer during the evening window cause the main power switch to be turned on and the dimmer set to full brightness. The routine triggers on the DFON control event and restricts it to the 18:00-23:00 schedule. Actions use the devices' accepted commands and the dimmer's percent UOM (51).\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
