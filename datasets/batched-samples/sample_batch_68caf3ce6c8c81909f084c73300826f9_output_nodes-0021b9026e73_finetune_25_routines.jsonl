{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: Pool TV.1 On-Off Module\nID: 54 CC 56 1\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=51]\n        Off [0]\n        On [100]\n    Responding [id=ERR]\n      Enum [uom id=25]\n        True [0]\n        False [1]\n  ***Accept Commands***\n    On [id=DON]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=51]\n    Off [id=DOF]\n    Fast Off [id=DFOF]\n    Fast On [id=DFON]\n    Query [id=QUERY]\n    Beep [id=BEEP]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=100]\n    Backlight [id=BL]\n        Parameter 1: name=n/a [id=n/a]\n          Range 0 to 100 Unit % [uom id=51]\n    Write Changes [id=WDU]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]\n    Fast Off [id=DFOF]\n    Fast On [id=DFON]\n    Fade Up [id=FDUP]\n    Fade Down [id=FDDOWN]\n    Fade Stop [id=FDSTOP]\n***Device***\nName: Garage Freezer\nID: n008_8b4c0100055cd4\n***Device***\nName: Camect Controller\nID: n003_controller\n  ***Properties***\n    NodeServer Online [id=ST]\n      Enum [uom id=25]\n        Disconnected [0]\n        Connected [1]\n        Failed [2]\n    Mode [id=MODE]\n      Enum [uom id=25]\n        Default [0]\n        Home [1]\n        Default [0]\n        Home [1]\n    Camects Configured [id=GV2]\n      Range 0 to 99 Unit Raw [uom id=56]\n        Default [0]\n        Home [1]\n    Camects Connected [id=GV3]\n      Range 0 to 99 Unit Raw [uom id=56]\n        Default [0]\n        Home [1]\n  ***Accept Commands***\n    Set Mode [id=SET_MODE]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            Default [0]\n            Home [1]\n    Query [id=QUERY]\n    Discover [id=DISCOVER]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]\n\nUSER QUERY: When the Camect Controller becomes Connected, set its Mode to Home; if it becomes Disconnected set Mode to Default."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 1001,\n    \"name\": \"Set Camect Mode on Connect/Disconnect\",\n    \"parent\": 0,\n    \"comment\": \"Switch Camect Mode based on NodeServer Online status\",\n    \"if\": [\n      { \"==\": { \"device\": \"n003_controller\", \"status\": \"ST\", \"value\": 1, \"uom\": \"25\", \"precision\": 0 } }\n    ],\n    \"then\": [\n      { \"device\": \"n003_controller\", \"command\": \"SET_MODE\", \"parameters\": [ { \"name\": \"n/a\", \"value\": 1, \"uom\": \"25\", \"precision\": 0 } ] }\n    ],\n    \"else\": [\n      { \"device\": \"n003_controller\", \"command\": \"SET_MODE\", \"parameters\": [ { \"name\": \"n/a\", \"value\": 0, \"uom\": \"25\", \"precision\": 0 } ] }\n    ],\n    \"reasoning\": \"When NodeServer Online (ST) equals Connected (1) act immediately to set Mode to Home (1). If not (handled in else), set Mode back to Default (0). Uses explicit ST enum values and the device's SET_MODE parameter enums.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
