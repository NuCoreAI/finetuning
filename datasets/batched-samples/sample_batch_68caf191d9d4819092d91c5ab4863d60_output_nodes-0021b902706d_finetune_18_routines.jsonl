{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE.\n\n## NuCore BASICS\nNuCore is a platform for managing and automating smart devices through structured commands and logic."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZY 002 Multilevel Sensor\nID: ZY002_118\nParent: ZW 002 On-Off Power Switch [ID: ZY002_1]\n  ***Properties***\n    Current Power [id=CPW]\n  ***Accept Commands***\n    Query [id=QUERY]***Device***\nName: ZY 002 Switch All\nID: ZY002_183\nParent: ZW 002 On-Off Power Switch [ID: ZY002_1]\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=25]\n        Ignore All On & All Off [0]\n        Ignore All On [1]\n        Ignore All Off [2]\n        Ignore None [255]\n  ***Accept Commands***\n    All On [id=ALLON]\n    All Off [id=ALLOFF]\n    Options [id=ALLSET]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            Ignore All On & All Off [0]\n            Ignore All On [1]\n            Ignore All Off [2]\n            Ignore None [255]\n    Query [id=QUERY]***Device***\nName: ZY 002 SC Assoc Only\nID: ZY002_254\nParent: ZW 002 On-Off Power Switch [ID: ZY002_1]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    None [id=NOP]\n\nUSER QUERY: When I physically press the Switch All \"All On\" button during weekdays between 09:00 and 17:00, set the Switch All options to Ignore All On so group 'All On' events won't turn everything on."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Weekday COC: Set SwitchAll to Ignore All On on physical All On\",\n    \"parent\": 0,\n    \"comment\": \"When the physical All On control is used during weekday work hours, set Options to Ignore All On\",\n    \"if\": [\n      { \"(\": 1 },\n        { \"==\": { \"device\":\"ZY002_183\",\"control\":\"ALLON\" } },\n      { \")\": 1 },\n      { \"and\": 1 },\n      { \"weekly\": { \"days\":\"mon,tue,wed,thu,fri\",\"from\":{ \"time\":\"09:00\",\"to\":{ \"time\":\"17:00\" } } } }\n    ],\n    \"then\": [\n      { \"device\":\"ZY002_183\",\"command\":\"ALLSET\",\"parameters\":[{ \"name\":\"n/a\",\"value\":1,\"uom\":\"25\",\"precision\":0 }] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"Detect physical All On (COC) on the Switch All during weekday work hours and set its Options parameter to the enum value 'Ignore All On' (1) so subsequent group All On events are ignored during those hours.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
