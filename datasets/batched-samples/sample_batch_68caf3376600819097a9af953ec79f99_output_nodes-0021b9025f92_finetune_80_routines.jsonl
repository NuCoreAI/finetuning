{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: Multilevel Sensor\nID: ZY083_118\nParent: Garage Attic [ID: ZY083_1]\n  ***Properties***\n    Luminance [id=LUMIN]\n  ***Accept Commands***\n    Query [id=QUERY]***Device***\nName: Wake Up\nID: ZY083_199\nParent: Garage Attic [ID: ZY083_1]\n  ***Properties***\n    Is Awake [id=ST]\n      Enum [uom id=51]\n        False [0]\n        True [100]\n        Unknown [101]\n    Keep Awake [id=GV1]\n      Enum [uom id=78]\n        Off [0]\n        On [100]\n    Wake Interval [id=GV2]\n  ***Accept Commands***\n    Query [id=QUERY]\n    Keep Awake [id=DON]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=78]\n            Off [0]\n            On [100]\n    Keep Awake Off [id=DOF]\n    Set Wake Interval [id=SETIV]\n        Parameter 1: name=n/a [id=n/a]\n          Range 0 to 4660 Unit Hours [uom id=20]\n          Range 0 to 279620 Unit Minutes [uom id=45]\n          Range 0 to 16777215 Unit seconds [uom id=58]\n  ***Send Commands***\n    Keep Awake [id=DON]\n    Keep Awake Off [id=DOF]***Device***\nName: Basic Control\nID: ZY083_251\nParent: Garage Attic [ID: ZY083_1]\n  ***Accept Commands***\n    Query [id=QUERY]\n  ***Send Commands***\n    On [id=DON]\n    Off [id=DOF]\n\nUSER QUERY: When the Garage Basic Control is pressed ON during weekdays from 08:00 to 18:00, enable Wake Up Keep Awake and set the Wake Interval to 2 hours."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Enable Keep Awake when garage switch turned on during work hours\",\n    \"parent\": 0,\n    \"comment\": \"Enable Keep Awake and set 2h interval when garage switch is pressed ON on weekdays\",\n    \"if\": [\n      { \"==\": { \"device\": \"ZY083_251\", \"control\": \"DON\" } },\n      { \"and\": 1 },\n      { \"weekly\": { \"days\": \"mon,tue,wed,thu,fri\", \"from\": { \"time\": \"08:00\", \"to\": { \"time\": \"18:00\" } } } }\n    ],\n    \"then\": [\n      { \"device\": \"ZY083_199\", \"command\": \"DON\" },\n      { \"device\": \"ZY083_199\", \"command\": \"SETIV\", \"parameters\": [ { \"name\": \"n/a\", \"value\": 2, \"uom\": \"20\", \"precision\": 0 } ] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"Use the Basic Control ON (COC) as the trigger and limit it to weekday work hours to avoid keeping the device awake at night or weekends. When triggered, send Keep Awake (DON) to the Wake Up device and set the Wake Interval to 2 hours so it remains responsive.\">\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
