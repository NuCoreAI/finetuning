{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: Soffit - Front\nID: n001_huegrp44\n  ***Accept Commands***\n    On [id=DON]\n    Off [id=DOF]\n    Set Temp and Brightness [id=SET_CTBR]\n        Parameter 1: name=Color Temperature [id=K] uom id=26 precision=1\n        Parameter 2: name=Transition Time [id=D] uom id=42 precision=1\n        Parameter 3: name=Brightness [id=BR] uom id=100 precision=1\n    Set RGB Color [id=SET_COLOR_RGB]\n        R/G/B uom id=100 precision=1\n        D uom id=42 precision=1\n        BR uom id=100 precision=1\n    Set Color [id=SET_COLOR] enum uom id=25 (Blue=4)\n    Set Brightness [id=SET_BRI] BR uom id=100 precision=1\n    Set Effect [id=SET_EFFECT] enum uom id=25 (None=1)\n***Device***\nName: Soffit - Back\nID: n001_huegrp45\n  ***Accept Commands***\n    On [id=DON]\n    Off [id=DOF]\n    Set Temp and Brightness [id=SET_CTBR] (K uom 26, D uom 42, BR uom 100)\n    Set Color [id=SET_COLOR] enum uom id=25 (Blue=4)\n    Set Brightness [id=SET_BRI] BR uom id=100 precision=1\n    Set Effect [id=SET_EFFECT] enum uom id=25 (None=1)\n***Device***\nName: Living Room Surround\nID: n001_huegrp200\n  ***Accept Commands***\n    Fast On [id=DFON]\n    On [id=DON]\n    Set RGB Color [id=SET_COLOR_RGB] (R/G/B uom 100, D uom 42, BR uom 100)\n\nUSER QUERY: At sunset turn both Soffit - Front and Soffit - Back to warm white 3000K at brightness 180 over 5000ms; if it's not sunset make sure they're off."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Sunset: Soffits warm white\",\n    \"parent\": 0,\n    \"comment\": \"At sunset set both soffits to warm 3000K, BR 180, 5s transition; otherwise turn them off.\",\n    \"if\": [\n      { \"at\": { \"sunset\": 0 } }\n    ],\n    \"then\": [\n      {\"device\":\"n001_huegrp44\",\"command\":\"SET_CTBR\",\"parameters\":[{\"name\":\"K\",\"value\":3000,\"uom\":\"26\",\"precision\":1},{\"name\":\"D\",\"value\":5000,\"uom\":\"42\",\"precision\":1},{\"name\":\"BR\",\"value\":180,\"uom\":\"100\",\"precision\":1}]},\n      {\"device\":\"n001_huegrp45\",\"command\":\"SET_CTBR\",\"parameters\":[{\"name\":\"K\",\"value\":3000,\"uom\":\"26\",\"precision\":1},{\"name\":\"D\",\"value\":5000,\"uom\":\"42\",\"precision\":1},{\"name\":\"BR\",\"value\":180,\"uom\":\"100\",\"precision\":1}]}\n    ],\n    \"else\": [\n      {\"device\":\"n001_huegrp44\",\"command\":\"DOF\",\"parameters\":[]},\n      {\"device\":\"n001_huegrp45\",\"command\":\"DOF\",\"parameters\":[]}\n    ],\n    \"reasoning\": \"User requested automated sunset behavior: trigger exactly at sunset to set comfortable warm color temperature and brightness with a smooth 5s transition. If not sunset, ensure the soffits are off to conserve energy.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
