{"messages": [{"role": "system", "content": "You are a NuCore smart-home assistant. You convert the user\u2019s request into one or more NuCore routines based on the provided DEVICE STRUCTURE."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZY 003 Switch All\nID: ZY003_183\nParent: Kitchen Dimmer [ID: ZY003_1]\n  ***Properties***\n    Status [id=ST]\n      Enum [uom id=25]\n        Ignore All On & All Off [0]\n        Ignore All On [1]\n        Ignore All Off [2]\n        Ignore None [255]\n  ***Accept Commands***\n    All On [id=ALLON]\n    All Off [id=ALLOFF]\n    Options [id=ALLSET]\n        Parameter 1: name=n/a [id=n/a]\n          Enum [uom id=25]\n            Ignore All On & All Off [0]\n            Ignore All On [1]\n            Ignore All Off [2]\n            Ignore None [255]\n    Query [id=QUERY]\n\nUSER QUERY: At sunset set the Kitchen \"ZY 003 Switch All\" Status to Ignore None (255). At sunrise set it to Ignore All On (1)."}, {"role": "assistant", "content": "__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 101,\n    \"name\": \"Kitchen SwitchAll - Sunset -> Ignore None\",\n    \"parent\": 0,\n    \"comment\": \"Set Switch All to 'Ignore None' at sunset\",\n    \"if\": [\n      { \"at\": { \"sunset\": 0 } }\n    ],\n    \"then\": [\n      { \"device\": \"ZY003_183\", \"command\": \"ALLSET\", \"parameters\": [ { \"name\": \"n/a\", \"value\": 255, \"uom\": \"25\", \"precision\": 0 } ] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"Ensure the group is set to Ignore None at sunset so individual switches act normally during evening usage. Uses the ALLSET command with the enum UOM 25 as defined in the device structure.\"\n  }\n}\n__END_NUCORE_ROUTINE__\n__BEGIN_NUCORE_ROUTINE__\n{\n  \"routine\": {\n    \"id\": 102,\n    \"name\": \"Kitchen SwitchAll - Sunrise -> Ignore All On\",\n    \"parent\": 0,\n    \"comment\": \"Set Switch All to 'Ignore All On' at sunrise\",\n    \"if\": [\n      { \"at\": { \"sunrise\": 0 } }\n    ],\n    \"then\": [\n      { \"device\": \"ZY003_183\", \"command\": \"ALLSET\", \"parameters\": [ { \"name\": \"n/a\", \"value\": 1, \"uom\": \"25\", \"precision\": 0 } ] }\n    ],\n    \"else\": [],\n    \"reasoning\": \"Apply Ignore All On at sunrise so morning routines that send All On are ignored; uses ALLSET with the enum value 1 per device definition.\"\n  }\n}\n__END_NUCORE_ROUTINE__"}]}
