{"messages": [{"role": "system", "content": "You are a smart home assistant and NuCore expert in automation and optimization."}, {"role": "user", "content": "DEVICE STRUCTURE:\n***Device***\nName: ZY 012 Porch Fan Light\nID: ZY012_1\n  ***Properties***\n    Status\n    Responding\n      Enum\n        True [0]\n        False [1]\n  ***Accept Commands***\n    On [DON]\n        Parameter 1:  []\n          Enum\n            Previous Value [1]\n          Range 0 to 100 Unit %\n        Parameter 2: Fade Rate [RR]\n          Range 0 to 127 Unit Minutes\n          Range 0 to 127 Unit seconds\n    Off [DOF]\n    Fast On [DFON]\n    Fast Off [DFOF]\n    Brighten [BRT]\n    Dim [DIM]\n    Fade Up [FDUP]\n        Parameter 1: Start Level [STARTLEVEL]\n          Enum\n            Previous Value [1]\n          Range 0 to 100 Unit %\n        Parameter 2: Fade Rate [RR]\n          Range 0 to 127 Unit Minutes\n          Range 0 to 127 Unit seconds\n    Fade Down [FDDOWN]\n        Parameter 1: Start Level [STARTLEVEL]\n          Enum\n            Previous Value [1]\n          Range 0 to 100 Unit %\n        Parameter 2: Fade Rate [RR]\n          Range 0 to 127 Unit Minutes\n          Range 0 to 127 Unit seconds\n    Fade [FADE]\n        Parameter 1: Direction [DIR]\n          Enum\n            Up [0]\n            Down [1]\n            None [3]\n        Parameter 2: Start Level [STARTLEVEL]\n          Enum\n            Previous Value [1]\n          Range 0 to 100 Unit %\n        Parameter 3: Fade Rate [RR]\n          Range 0 to 127 Unit Minutes\n          Range 0 to 127 Unit seconds\n        Parameter 4: 2nd Direction [DIR2]\n          Enum\n            Up [0]\n            Down [1]\n            None [3]\n        Parameter 5: 2nd Fade Rate [STEP2]\n          Range 0 to 127 Unit Minutes\n          Range 0 to 127 Unit seconds\n    Fade Stop [FDSTOP]\n    Query [QUERY]\n    Set Configuration [CONFIG]\n        Parameter 1: Parameter Number [NUM]\n        Parameter 2: Parameter Value [VAL]\n          Range 0 to 255 Unit 1 Byte (Unsigned)\n          Range 0 to 65535 Unit 2 Bytes (Unsigned)\n          Range 0 to 4294967295 Unit 4 Bytes (Unsigned)\n          Range -128 to 127 Unit 1 Byte\n          Range -32768 to 32767 Unit 2 Byte\n          Range -2147483648 to 214748647 Unit 4 Byte\n    Write Changes [WDU]\n  ***Send Commands***\n    On [DON]\n    Off [DOF]\n    Fade Up [FDUP]\n    Fade Down [FDDOWN]\n    Fade Stop [FDSTOP]\n***Device***\nName: Thermostat - Main\nID: 25 61 87 1\n  ***Properties***\n    Temperature\n      Range -50 to 150 Unit Degrees (step of 0.5 and precision of 1).\n    Heat Setpoint\n      Range 0 to 120 Unit Degrees\n    Cool Setpoint\n      Range 10 to 120 Unit Degrees\n    Mode\n      Enum\n        Off [0]\n        Heat [1]\n        Cool [2]\n        Auto [3]\n        Fan Only [4]\n        Program Auto [5]\n        Program Heat [6]\n        Program Cool [7]\n        Program Auto [5]\n    Fan Mode\n      Enum\n        On [7]\n        Auto [8]\n    Humidity\n      Range 0 to 100 Unit %\n    Heat/Cool State\n      Enum\n        Idle [0]\n        Heating [1]\n        Cooling [2]\n        Fan Only [3]\n        Pending Heat [4]\n        Pending Cool [5]\n        Vent [6]\n        Aux Heat [7]\n        2nd Stage Heating [8]\n        2nd Stage Cooling [9]\n        2nd Stage Aux Heat [10]\n        3rd Stage Aux Heat [11]\n    Responding\n      Enum\n        True [0]\n        False [1]\n  ***Accept Commands***\n    Heat Setpoint [CLISPH]\n        Parameter 1:  []\n          Range 0 to 120 Unit Degrees\n    Cool Setpoint [CLISPC]\n        Parameter 1:  []\n          Range 10 to 120 Unit Degrees\n    Mode [CLIMD]\n        Parameter 1:  []\n          Enum\n            Off [0]\n            Heat [1]\n            Cool [2]\n            Auto [3]\n            Fan Only [4]\n            Program Auto [5]\n            Program Heat [6]\n            Program Cool [7]\n            Program Auto [5]\n    Fan Mode [CLIFS]\n        Parameter 1:  []\n          Enum\n            On [7]\n            Auto [8]\n    Setpoint Up [BRT]\n    Setpoint Down [DIM]\n    Beep [BEEP]\n        Parameter 1:  []\n          Enum\n    Query [QUERY]\n    Set Time [SETTIME]\n    Write Changes [WDU]\n***Device***\nName: Shop Outside Lights\nID: 29 B8 40 1\n  ***Properties***\n    Status\n      Range 0 to 100 Unit %\n        Off [0]\n    On Level\n      Range 0 to 100 Unit %\n        Off [0]\n    Ramp Rate\n      Enum\n        9.0 minutes [0]\n        8.0 minutes [1]\n        7.0 minutes [2]\n        6.0 minutes [3]\n        5.0 minutes [4]\n        4.5 minutes [5]\n        4.0 minutes [6]\n        3.5 minutes [7]\n        3.0 minutes [8]\n        2.5 minutes [9]\n        2.0 minutes [10]\n        1.5 minutes [11]\n        1.0 minute [12]\n        47.0 seconds [13]\n        43.0 seconds [14]\n        38.5 seconds [15]\n        34.0 seconds [16]\n        32.0 seconds [17]\n        30.0 seconds [18]\n        28.0 seconds [19]\n        26.0 seconds [20]\n        23.5 seconds [21]\n        21.5 seconds [22]\n        19.0 seconds [23]\n        8.5 seconds [24]\n        6.5 seconds [25]\n        4.5 seconds [26]\n        2.0 seconds [27]\n        0.5 seconds [28]\n        0.3 seconds [29]\n        0.2 seconds [30]\n        0.1 seconds [31]\n    Responding\n      Enum\n        True [0]\n        False [1]\n  ***Accept Commands***\n    On [DON]\n        Parameter 1:  []\n          Range 0 to 100 Unit %\n    Off [DOF]\n    Fast Off [DFOF]\n    Fast On [DFON]\n    Brighten [BRT]\n    Dim [DIM]\n    Fade Up [FDUP]\n    Fade Down [FDDOWN]\n    Fade Stop [FDSTOP]\n    Query [QUERY]\n    Beep [BEEP]\n        Parameter 1:  []\n          Enum\n    On Level [OL]\n        Parameter 1:  []\n          Range 0 to 100 Unit %\n            Off [0]\n    Ramp Rate [RR]\n        Parameter 1:  []\n          Enum\n            9.0 minutes [0]\n            8.0 minutes [1]\n            7.0 minutes [2]\n            6.0 minutes [3]\n            5.0 minutes [4]\n            4.5 minutes [5]\n            4.0 minutes [6]\n            3.5 minutes [7]\n            3.0 minutes [8]\n            2.5 minutes [9]\n            2.0 minutes [10]\n            1.5 minutes [11]\n            1.0 minute [12]\n            47.0 seconds [13]\n            43.0 seconds [14]\n            38.5 seconds [15]\n            34.0 seconds [16]\n            32.0 seconds [17]\n            30.0 seconds [18]\n            28.0 seconds [19]\n            26.0 seconds [20]\n            23.5 seconds [21]\n            21.5 seconds [22]\n            19.0 seconds [23]\n            8.5 seconds [24]\n            6.5 seconds [25]\n            4.5 seconds [26]\n            2.0 seconds [27]\n            0.5 seconds [28]\n            0.3 seconds [29]\n            0.2 seconds [30]\n            0.1 seconds [31]\n    Backlight [BL]\n        Parameter 1:  []\n          Range 0 to 100 Unit %\n    Write Changes [WDU]\n  ***Send Commands***\n    On [DON]\n    Off [DOF]\n    Fast Off [DFOF]\n    Fast On [DFON]\n    Fade Up [FDUP]\n    Fade Down [FDDOWN]\n    Fade Stop [FDSTOP]\n    Brighten [BRT]\n    Dim [DIM]\n***Device***\nName: ZY 010 Garage Door Lower\nID: ZY010_1\n  ***Properties***\n    Status\n      Enum\n        Off [0]\n        On [100]\n        Unknown [101]\n    Responding\n      Enum\n        True [0]\n        False [1]\n  ***Accept Commands***\n    On [DON]\n        Parameter 1:  []\n          Enum\n            Off [0]\n            On [100]\n    Off [DOF]\n    Query [QUERY]\n    Set Configuration [CONFIG]\n        Parameter 1: Parameter Number [NUM]\n        Parameter 2: Parameter Value [VAL]\n          Range 0 to 255 Unit 1 Byte (Unsigned)\n          Range 0 to 65535 Unit 2 Bytes (Unsigned)\n          Range 0 to 4294967295 Unit 4 Bytes (Unsigned)\n          Range -128 to 127 Unit 1 Byte\n          Range -32768 to 32767 Unit 2 Byte\n          Range -2147483648 to 214748647 Unit 4 Byte\n    Write Changes [WDU]\n  ***Send Commands***\n    On [DON]\n    Off [DOF]\n***Device***\nName: Mini Remote - A\nID: 26 33 AB 2\n  ***Properties***\n    Status\n      Range 0 to 100 Unit %\n        Off [0]\n        On [100]\n    Responding\n      Enum\n        True [0]\n        False [1]\n  ***Accept Commands***\n    Write Changes [WDU]\n  ***Send Commands***\n    On [DON]\n    Off [DOF]\n    Fast Off [DFOF]\n    Fast On [DFON]\n    Fade Up [FDUP]\n    Fade Down [FDDOWN]\n    Fade Stop [FDSTOP]\n\n\nUSER QUERY:\nWhen the Mini Remote - A is physically turned on (fast on command), turn on the ZY 012 Porch Fan Light to 70% brightness with a 10 second fade rate."}, {"role": "assistant", "content": "Step-by-step reasoning:\n- The user wants an automation triggered by a physical command from Mini Remote - A, specifically the \"Fast On\" command (COC).\n- When Mini Remote - A sends the \"Fast On\" command, the action is to turn on the ZY 012 Porch Fan Light.\n- The ZY 012 Porch Fan Light's \"On\" command (DON) accepts two parameters: brightness level (0-100%) and fade rate (0-127 seconds or minutes).\n- We will set brightness to 70% and fade rate to 10 seconds.\n- The condition must check for COC \"DFON\" from Mini Remote - A.\n- The action sends the \"On\" command to ZY012_1 with parameters: brightness 70%, fade rate 10 seconds.\n\n{\n  \"routine\": {\n    \"name\": \"Turn on Porch Fan Light at 70% with fade when Mini Remote fast on\",\n    \"condition\": {\n      \"==\": {\n        \"device\": \"26 33 AB 2\",\n        \"coc\": \"DFON\"\n      }\n    },\n    \"action\": {\n      \"device\": \"ZY012_1\",\n      \"command\": \"DON\",\n      \"parameters\": [\n        { \"name\": \"\", \"value\": 70, \"uom\": \"percent\", \"precision\": 1 },\n        { \"name\": \"RR\", \"value\": 10, \"uom\": \"seconds\", \"precision\": 0 }\n      ]\n    }\n  }\n}"}]}
